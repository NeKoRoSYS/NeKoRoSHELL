#!/usr/bin/env bash
set -euo pipefail

declare -A COMPONENTS=(
    ["wallpaper"]="${1:-random}"
    ["navbar"]="${2:-legacy}"
    ["launcher"]="${3:-legacy}"
    ["lockscreen"]="${4:-legacy}"
    ["panel"]="${5:-legacy}"
    ["power"]="${6:-legacy}"
    ["windows"]="${7:-legacy}"
)

ORDER=("wallpaper" "navbar" "launcher" "lockscreen" "panel" "power" "windows")

echo -e "\033[0;34mApplying NeKoRoSHELL Theme Components...\033[0m"

for comp in "${ORDER[@]}"; do
    val="${COMPONENTS[$comp]}"
    echo -e "  \033[0;33m-> Applying $comp:\033[0m $val"
    
    if ! customize "$comp" "$val" >/dev/null; then 
        echo -e "\033[0;31mError: Failed to apply $comp skin '$val'.\033[0m"
        exit 1
    fi
done

echo -e "\n\033[0;32mTheme successfully applied!\033[0m"
